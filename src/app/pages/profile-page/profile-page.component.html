<ion-header [translucent]="true">
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-menu-button></ion-menu-button>
		</ion-buttons>
		<ion-title>Profile</ion-title>
		<!-- this right here is only for ANDROID. -->
	</ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
	<ion-header collapse="condense">
		<ion-toolbar>
			<ion-title size="large">Profile</ion-title>
			<!-- This right here is only for IOS -->
		</ion-toolbar>
	</ion-header>

	<h1 *ngIf="!authService.isLoggedIn">
		You're Not logged in! <ion-icon name="lock-closed-outline"></ion-icon>
	</h1>

	<div
		id="MainProfileSegment"
		class="UserID:{{ user.uid }}"
		*ngIf="authService.userData as user"
	>
		<h1>
			Welcome:
			<strong>{{ user.displayName ?? 'User' }}</strong>
		</h1>
		<form id="UserProfileDataForm" [formGroup]="userProfileDataGroup">
			<fieldset>
				<legend>Profile</legend>
				<img
					class="img-thumbnail"
					src="{{ user.photoURL ?? '/assets/png/dummy-avatar.png' }}"
					alt="{{ user.displayName }}"
				/>
				<ion-item>
					<ion-input
						type="text"
						labelPlacement="left"
						label="Display Name: "
						formControlName="displayName"
					/>
					<ion-icon name="create-outline" />
				</ion-item>
				<ion-item>
					<ion-input
						class="te"
						type="text"
						labelPlacement="left"
						name="email"
						label="Email: "
						formControlName="email"
					/>
					<ion-icon name="create-outline" />
				</ion-item>
				<ion-item>
					<ion-input
						readonly
						label="Email Verified:"
						labelPlacement="left"
						formControlName="emailVerified"
					/>
				</ion-item>
				<ion-item>
					<ion-button
						(click)="updateUserProfile()"
						[disabled]="!userProfileDataGroup.dirty"
					>
						Save
					</ion-button>
					<ion-button
						(click)="resetUserProfileDataGroup()"
						[disabled]="!userProfileDataGroup.dirty"
					>
						Cancel
					</ion-button>
				</ion-item>
			</fieldset>
		</form>
		<form
			id="UserProfileSettingsForm"
			[formGroup]="userProfileSettingsGroup"
		>
			<fieldset>
				<legend>Settings</legend>
				<ion-item>
					<ion-icon
						name="mail-outline"
						style="margin-right: 8px"
					></ion-icon>
					<ion-toggle
						labelPlacement="start"
						formControlName="allowEmailNotifications"
						>Allow Email Notifications</ion-toggle
					>
				</ion-item>
				<ion-item>
					<ion-icon
						name="warning-outline"
						style="margin-right: 8px"
					></ion-icon>
					<ion-toggle labelPlacement="start" formControlName="adult"
						>Show Adult Movies</ion-toggle
					>
				</ion-item>
				<ion-item>
					<ion-icon
						name="contrast-outline"
						style="margin-right: 8px"
					></ion-icon>
					<ion-toggle
						labelPlacement="start"
						formControlName="prefersDarkMode"
						>Dark Mode</ion-toggle
					>
				</ion-item>
			</fieldset>
		</form>
	</div>
</ion-content>
